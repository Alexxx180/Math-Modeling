<Application x:Class="MathWindow.App"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:vm="clr-namespace:MathWindow.ViewModel.Components"
			 Startup="OnStartup">
	<Application.Resources>
		<ResourceDictionary>
			<!--<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="Resources/Styles/Total.xaml"/>
				<ResourceDictionary Source="Resources/Styles/Text.xaml"/>
				<ResourceDictionary Source="Resources/Styles/Editing/Buttons.xaml"/>
				<ResourceDictionary Source="Resources/Styles/Editing/Input.xaml"/>
				
				<ResourceDictionary Source="Resources/Templates/Controls/Fields.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Data/Items.xaml"/>

				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Tabs/Information.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Tabs/Documents.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Tabs/Mode/View.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Tabs/Mode/Edit.xaml"/>

				<ResourceDictionary Source="Resources/Templates/Data/Hierarchy/Rooter.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Data/Hierarchy/Dialogs/Dependencies.xaml"/>
				
				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Main.xaml"/>
				<ResourceDictionary Source="Resources/Templates/Controls/Windows/Editor.xaml"/>
			</ResourceDictionary.MergedDictionaries>-->

			<DataTemplate x:Key="ExpressNumber">
				<Border>
					<StackPanel Orientation="Horizontal">
						<StackPanel.Resources>
							<Style TargetType="{x:Type TextBlock}">
								<Setter Property="Margin" Value="10,5,10,5"/>
							</Style>
						</StackPanel.Resources> 

						<TextBlock Text="{Binding Path=Name}"/>
						<TextBlock Text="{Binding Path=No}"/>
					</StackPanel>
				</Border>
			</DataTemplate>

			<DataTemplate x:Key="ExpressText">
				<TextBlock Text="{Binding}"/>
			</DataTemplate>

			<DataTemplate x:Key="ExpressList">
				<StackPanel Orientation="Horizontal">
					<StackPanel.Resources>
						<Style TargetType="{x:Type TextBlock}">
							<Setter Property="Margin" Value="10,5,10,5"/>
						</Style>
					</StackPanel.Resources> 

					<TextBlock Text="{Binding Path=Name}"/>
					<ListBox ItemTemplate="{StaticResource ExpressText}" ItemsSource="{Binding Path=No}">
						<ListBox.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel Orientation="Horizontal"/>
							</ItemsPanelTemplate>
						</ListBox.ItemsPanel>
					</ListBox>
				</StackPanel>
			</DataTemplate>

			<DataTemplate x:Key="ExpressGrid">
				<StackPanel Orientation="Vertical">
					<StackPanel.Resources>
						<Style TargetType="{x:Type TextBlock}">
							<Setter Property="Margin" Value="10,5,10,5"/>
						</Style>
					</StackPanel.Resources> 

					<TextBlock Text="{Binding Path=Name}"/>
					<DataGrid ItemsSource="{Binding Path=No}">
						
					</DataGrid>
					<!--<ListBox ItemTemplate="{StaticResource ExpressText}" ItemsSource="{Binding Path=No}">
						<ListBox.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel Orientation="Horizontal"/>
							</ItemsPanelTemplate>
						</ListBox.ItemsPanel>
					</ListBox>-->
				</StackPanel>
			</DataTemplate>

			<ControlTemplate x:Key="ExpressFile">
				<StackPanel>
					<StackPanel.Resources>
						<Style TargetType="{x:Type ListBox}">
							<Setter Property="Margin" Value="10,5,10,5"/>
						</Style>
						<Style TargetType="{x:Type TextBlock}">
							<Setter Property="Margin" Value="10,5,10,5"/>
						</Style>
					</StackPanel.Resources>

					<TextBlock Text="Расчет"/>
					<ListBox ItemTemplate="{StaticResource ExpressNumber}" ItemsSource="{Binding Path=Data.Calculus}">
						<ListBox.ItemsPanel>
							<ItemsPanelTemplate>
								<WrapPanel/>
							</ItemsPanelTemplate>
						</ListBox.ItemsPanel>
					</ListBox>

					<TextBlock Text="Данные"/>
					<ListBox ItemTemplate="{StaticResource ExpressList}" ItemsSource="{Binding Path=Data.Data}" />

					<TextBlock Text="Результат"/>
					<ListBox ItemTemplate="{StaticResource ExpressGrid}" ItemsSource="{Binding Path=Data.Result}" />
				</StackPanel>
			</ControlTemplate>

			<DataTemplate DataType="{x:Type vm:MainViewModel}">
				<ContentControl>
					<Grid>
						<TabControl>
							<TabItem>
								<TabItem.Header>
									<TextBlock Text="Дискретная модель"/>
								</TabItem.Header>
								<TabItem.Content>
									<ContentControl Template="{StaticResource ExpressFile}" DataContext="{Binding Path=Table}"/>
								</TabItem.Content>
							</TabItem>
							<TabItem>
								<TabItem.Header>
									<TextBlock Text="Непрерывная модель"/>
								</TabItem.Header>
								<TabItem.Content>
									<ContentControl Template="{StaticResource ExpressFile}" DataContext="{Binding Path=Model}"/>
								</TabItem.Content>
							</TabItem>
						</TabControl>
					</Grid>
				</ContentControl>
			</DataTemplate>

		</ResourceDictionary>
	</Application.Resources>
</Application>
